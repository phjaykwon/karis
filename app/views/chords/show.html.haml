= content_for(:title, @chord.title + " by " + @chord.artist.name + " @ karisapp.herokuapp.com")

.chord-body
	=render "main/header-black"

	.chord-content
		.section_search
			=form_tag(main_index_path, method: :get) do
				=text_field_tag :search, "", class: 'search-field-black', placeholder: "I think you need to search for an easier song..."
				=button_tag 'GO' , class: 'search-button-black' , type: :submit

		.section_top
			.info
				.title
					= @chord.title
				.artist
					= @chord.artist.name
				.uploader
					= @chord.user.full_name
				.video_url
					= link_to "Click here for the link to the video", @chord.video_url, target: "_blank"

			.functions
				.transpose
					= hidden_field_tag 'chord_id', @chord.id
					%ul
						-if @chord.is_favorited(current_user)
							%ul.favorites.function-text
								Un-Favorite
							%ul.favorites.transpose-is-favorited#transpose-item
								.icon-container
									=image_tag "favorite.png", class: "icon"
						-else
							%ul.favorites.function-text
								Favorite
							%ul.favorites.transpose-is-favorited#transpose-item
								.icon-container
									=image_tag "favorite.png", class: "icon"

						%ul.function-text
							Transpose
						%ul.transpose-up#transpose-item
							.icon-container
								=image_tag "up-arrow.png", class: "icon"
						%ul.transpose-down#transpose-item
							.icon-container
								=image_tag "down-arrow.png", class: "icon"

						%ul.function-text
							Font-size
						%ul.transpose-plus#transpose-item
							.icon-container
								=image_tag "plus.png", class: "icon"
						%ul.transpose-minus#transpose-item
							.icon-container
								=image_tag "minus.png", class: "icon"


		.main
			.chordsLeft
				%pre
					= preserve do
						= @chord.content

	=render "main/footer-black"

:javascript
	$(document).ready(function() {
		var new_content = ChordsUtils.updateContent($("pre").text(), #{@valid_chords});
		$("pre").html(new_content);
	});
